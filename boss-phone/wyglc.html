<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç‰©ä¸šç®¡ç†å¤„çº¿ç´¢æœå¯»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: white;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            font-size: 16px;
            background-color: #111;
            touch-action: manipulation;
        }

        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1;
            transition: background-image 0.5s ease-in-out;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.85) 100%);
            z-index: 0;
        }

        .game-container {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.6rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            color: #f8f9fa;
            padding: 0 10px;
        }

        .subtitle {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1rem;
            color: #3498db;
            font-style: italic;
            padding: 0 15px;
        }

        .location {
            background-color: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            border-left: 5px solid #3498db;
            backdrop-filter: blur(5px);
        }

        .location h2 {
            color: #3498db;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .location p {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.95;
        }

        .inventory {
            background-color: rgba(41, 128, 185, 0.9);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            border-left: 5px solid #2ecc71;
            backdrop-filter: blur(5px);
        }

        .inventory h3 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .inventory-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .inventory-item {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0.7;
        }

        .inventory-item.found {
            background-color: rgba(46, 204, 113, 0.3);
            border: 1px solid #2ecc71;
            opacity: 1;
        }

        .clue-hint {
            background-color: rgba(155, 89, 182, 0.9);
            padding: 12px 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            border-left: 5px solid #9b59b6;
            backdrop-filter: blur(5px);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .clue-hint h3 {
            color: #e0c3ff;
            margin-bottom: 8px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            padding: 16px 18px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: left;
            position: relative;
            overflow: hidden;
            min-height: 65px;
            display: flex;
            align-items: center;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        button:hover, button:active {
            background: linear-gradient(135deg, #2980b9 0%, #2573a7 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
        }

        button:active {
            transform: translateY(0);
        }

        button::after {
            content: "â†’";
            position: absolute;
            right: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 1.1rem;
        }

        button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(135deg, #7f8c8d 0%, #95a5a6 100%);
        }

        button.disabled:hover {
            transform: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.3s ease-in-out;
            backdrop-filter: blur(5px);
        }

        .success {
            background-color: rgba(46, 204, 113, 0.9);
            border-left: 5px solid #27ae60;
        }

        .failure {
            background-color: rgba(231, 76, 60, 0.9);
            border-left: 5px solid #c0392b;
        }

        .info {
            background-color: rgba(52, 152, 219, 0.9);
            border-left: 5px solid #2980b9;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress {
            margin-top: 15px;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 12px;
            font-size: 0.9rem;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .code-display {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            border-left: 3px solid #3498db;
        }

        /* æ‰‹æœºæ¨ªå±ä¼˜åŒ– */
        @media (max-height: 600px) and (orientation: landscape) {
            .game-container {
                padding: 10px;
                justify-content: flex-start;
            }
            
            h1 {
                font-size: 1.4rem;
                margin-bottom: 10px;
            }
            
            .subtitle {
                margin-bottom: 15px;
                font-size: 0.9rem;
            }
            
            .location, .inventory, .clue-hint {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            button {
                padding: 12px 15px;
                min-height: 55px;
                font-size: 0.95rem;
            }
        }

        /* å¹³æ¿æ ·å¼ */
        @media (min-width: 768px) {
            .game-container {
                padding: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            .location h2 {
                font-size: 1.5rem;
            }

            .options {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
        }

        /* å°å±å¹•æ‰‹æœºä¼˜åŒ– */
        @media (max-width: 360px) {
            .game-container {
                padding: 12px;
            }

            h1 {
                font-size: 1.4rem;
            }

            button {
                padding: 14px 16px;
                font-size: 0.95rem;
                min-height: 60px;
            }
        }

        /* æ»šåŠ¨æ¡ä¼˜åŒ– */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(52, 152, 219, 0.5);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="background" id="background"></div>
    <div class="overlay"></div>

    <div class="game-container">
        <h1>ç‰©ä¸šç®¡ç†å¤„çº¿ç´¢æœå¯»</h1>
        <div class="subtitle">è¿™ä»¶äº‹ä¹Ÿè®¸æœ‰ç‰©ä¸šçš„å‚ä¸......æ‰¾æ‰¾çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆçº¿ç´¢...</div>
        
        <div class="clue-hint" id="clue-hint">
            <h3>ğŸ” å½“å‰å‘ç°</h3>
            <div id="current-clue">è¿™é‡Œçœ‹èµ·æ¥æœ‰äº›ä¸å¤ªå¯¹åŠ²...</div>
        </div>
        
        <div class="location" id="current-location">
            <h2>ç‰©ä¸šç®¡ç†å¤„å‰å°</h2>
            <p>å‰å°åŒºåŸŸå¼‚å¸¸çš„å®‰é™ï¼Œå€¼ç­è¡¨ä¸Šçš„æ’ç­ä¼¼ä¹è¢«è°ƒæ•´è¿‡ã€‚ç©ºæ°”ä¸­å¼¥æ¼«ç€ä¸€ç§è¯´ä¸å‡ºçš„ç´§å¼ æ„Ÿï¼Œä½ è§‰å¾—è¿™é‡Œä¸€å®šè—ç€ä»€ä¹ˆ...</p>
        </div>
        
        <div class="inventory" id="inventory">
            <h3>ğŸ“¦ æ‰¾åˆ°çš„çº¿ç´¢</h3>
            <div class="inventory-items" id="inventory-items">
                <div class="inventory-item">???</div>
                <div class="inventory-item">???</div>
                <div class="inventory-item">???</div>
                <div class="inventory-item">???</div>
            </div>
        </div>

        <div class="options" id="options-container">
            <!-- é€‰é¡¹å°†åŠ¨æ€ç”Ÿæˆ -->
        </div>

        <div class="result" id="result">
            <!-- ç»“æœå°†åŠ¨æ€æ˜¾ç¤º -->
        </div>
        
        <div class="progress" id="progress">
            çº¿ç´¢æ”¶é›†: 0/4 | ç»§ç»­æœå¯»...
        </div>
    </div>

    <script>
        // å›¾ç‰‡èµ„æº
        const locationImages = {
            frontDesk: "https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            officeDesk: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            storageRoom: "https://images.unsplash.com/photo-1579226905180-636b76d96082?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            breakRoom: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
        };

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            currentLocation: 'frontDesk',
            foundItems: {
                item1: false, // å‰ªæŠ¥
                item2: false, // çº¸æ¡ä»£ç 
                item3: false, // ä¿¡å·å±è”½ä»ª
                item4: false  // åœ°é¢å¼‚å¸¸ä¿¡æ¯
            },
            clues: [
                "è¿™é‡Œçœ‹èµ·æ¥æœ‰äº›ä¸å¤ªå¯¹åŠ²...",
                "å€¼ç­è¡¨ä¸Šçš„æ—¥æœŸå®‰æ’æœ‰ç‚¹å¥‡æ€ª...",
                "åŠå…¬å®¤æŠ½å±‰é‡Œè—ç€ä»€ä¹ˆ...",
                "å‚¨ç‰©é—´é‡Œæœ‰äº›å¼‚å¸¸æƒ…å†µ...",
                "æ‰€æœ‰çš„çº¿ç´¢éƒ½æŒ‡å‘äº†ä¸€ä¸ªä»¤äººä¸å®‰çš„çœŸç›¸..."
            ],
            itemNames: ["???", "???", "???", "???"]
        };

        // ä½ç½®é…ç½® - æŒ‰ç…§æ‚¨çš„è¦æ±‚ä¿®æ”¹
        const locations = {
            frontDesk: {
                name: "ç‰©ä¸šç®¡ç†å¤„å‰å°",
                description: "å‰å°åŒºåŸŸå¼‚å¸¸çš„å®‰é™ï¼Œå€¼ç­è¡¨ä¸Šçš„æ’ç­ä¼¼ä¹è¢«è°ƒæ•´è¿‡ã€‚ç©ºæ°”ä¸­å¼¥æ¼«ç€ä¸€ç§è¯´ä¸å‡ºçš„ç´§å¼ æ„Ÿï¼Œä½ è§‰å¾—è¿™é‡Œä¸€å®šè—ç€ä»€ä¹ˆ...",
                options: [
                    { 
                        text: "æŸ¥çœ‹å€¼ç­è¡¨", 
                        target: "checkDutyBoard", 
                        item: null,
                        hint: "å€¼ç­å®‰æ’çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ª"
                    },
                    { 
                        text: "æ£€æŸ¥å‰å°æŠ½å±‰", 
                        target: "checkFrontDesk", 
                        item: null,
                        hint: "æŠ½å±‰é‡Œç©ºç©ºå¦‚ä¹Ÿ"
                    },
                    { 
                        text: "è¿›å…¥åŠå…¬å®¤åŒºåŸŸ", 
                        target: "office",
                        hint: "åŠå…¬å®¤é‡Œå¯èƒ½ä¼šæœ‰æ›´å¤šå‘ç°"
                    },
                    { 
                        text: "å‰å¾€å‚¨ç‰©å®¤", 
                        target: "storage",
                        hint: "å‚¨ç‰©å®¤çš„é—¨åŠæ©ç€..."
                    },
                    { 
                        text: "æ£€æŸ¥å‰å°è§’è½", 
                        target: "checkCorner", 
                        item: null,
                        hint: "è¿™é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰"
                    }
                ],
                image: "frontDesk"
            },
            checkDutyBoard: {
                name: "å€¼ç­è¡¨",
                description: "å€¼ç­è¡¨æ˜¾ç¤º12æœˆ31æ—¥æ™šä¸Šæ˜¯å‘¨å€¼ç­ï¼Œè€Œä¸”æ˜¯ç”¨çº¢ç¬”ç‰¹åˆ«æ ‡æ³¨çš„ã€‚è¿™å¤©çš„è®°å½•ä¼¼ä¹è¢«ä¿®æ”¹è¿‡å¤šæ¬¡ã€‚",
                options: [
                    { text: "è¿”å›å‰å°", target: "frontDesk" }
                ],
                image: "frontDesk",
                isDeadEnd: true
            },
            checkFrontDesk: {
                name: "å‰å°æŠ½å±‰",
                description: "æŠ½å±‰é‡Œåªæœ‰ä¸€äº›åŠå…¬ç”¨å“ï¼Œæ²¡æœ‰å‘ç°ä»€ä¹ˆç‰¹åˆ«çš„ä¸œè¥¿ã€‚",
                options: [
                    { text: "è¿”å›å‰å°", target: "frontDesk" }
                ],
                image: "frontDesk",
                isDeadEnd: true
            },
            checkCorner: {
                name: "å‰å°è§’è½",
                description: "è§’è½é‡Œåªæœ‰ä¸€äº›ç§¯ç°ï¼Œçœ‹èµ·æ¥å·²ç»å¾ˆä¹…æ²¡äººæ‰“æ‰«è¿‡äº†ã€‚",
                options: [
                    { text: "è¿”å›å‰å°", target: "frontDesk" }
                ],
                image: "frontDesk",
                isDeadEnd: true
            },
            office: {
                name: "åŠå…¬å®¤åŒºåŸŸ",
                description: "åŠå…¬å®¤é‡Œæœ‰Aã€Bã€Cã€Då››ä¸ªåŠå…¬æ¡Œã€‚CåŠå…¬æ¡Œçœ‹èµ·æ¥æ ¼å¤–æ•´æ´ï¼Œåè€Œè®©äººè§‰å¾—å¯ç–‘ã€‚å…¶ä»–çš„åŠå…¬æ¡Œéƒ½æœ‰æ­£å¸¸çš„ä½¿ç”¨ç—•è¿¹ã€‚",
                options: [
                    { 
                        text: "æ£€æŸ¥AåŠå…¬æ¡Œ", 
                        target: "checkDeskA", 
                        item: null,
                        hint: "æ­£å¸¸çš„å·¥ä½œæ–‡ä»¶ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«"
                    },
                    { 
                        text: "æ£€æŸ¥BåŠå…¬æ¡Œ", 
                        target: "checkDeskB", 
                        item: null,
                        hint: "ä¸ªäººç‰©å“ï¼Œæ²¡æœ‰å‘ç°å¼‚å¸¸"
                    },
                    { 
                        text: "æ£€æŸ¥CåŠå…¬æ¡ŒæŠ½å±‰", 
                        target: "checkDeskC", 
                        item: "item1",
                        hint: "æŠ½å±‰é‡Œå¥½åƒæœ‰æœ¬ä¹¦"
                    },
                    { 
                        text: "æ£€æŸ¥DåŠå…¬æ¡Œ", 
                        target: "checkDeskD", 
                        item: null,
                        hint: "ä¸€äº›å·¥ä½œè®°å½•ï¼Œå¾ˆæ™®é€š"
                    },
                    { 
                        text: "æŸ¥çœ‹CåŠå…¬æ¡Œé¢", 
                        target: "checkDeskCSurface", 
                        item: "item2",
                        hint: "æ¡Œä¸Šæœ‰å¼ å¥‡æ€ªçš„çº¸æ¡"
                    },
                    { 
                        text: "è¿”å›å‰å°", 
                        target: "frontDesk"
                    }
                ],
                image: "officeDesk"
            },
            checkDeskA: {
                name: "AåŠå…¬æ¡Œ",
                description: "æ¡Œé¢ä¸Šæ˜¯æ­£å¸¸çš„å·¥ä½œæ–‡ä»¶å’Œä¸€äº›æ–‡å…·ï¼ŒæŠ½å±‰é‡Œä¹Ÿæ˜¯æ™®é€šçš„åŠå…¬ç”¨å“ã€‚",
                options: [
                    { text: "è¿”å›åŠå…¬å®¤", target: "office" }
                ],
                image: "officeDesk",
                isDeadEnd: true
            },
            checkDeskB: {
                name: "BåŠå…¬æ¡Œ",
                description: "æœ‰ä¸€äº›ä¸ªäººç‰©å“å’Œå®¶åº­ç…§ç‰‡ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªæ™®é€šå‘˜å·¥çš„å·¥ä½ã€‚",
                options: [
                    { text: "è¿”å›åŠå…¬å®¤", target: "office" }
                ],
                image: "officeDesk",
                isDeadEnd: true
            },
            checkDeskC: {
                name: "CåŠå…¬æ¡ŒæŠ½å±‰",
                description: "æŠ½å±‰é‡Œæ”¾ç€ä¸€æœ¬ã€Šç‰©ä¸šç®¡ç†æ‰‹å†Œã€‹ï¼Œç¿»å¼€ä¹¦ï¼Œé‡Œé¢å¤¹ç€ä¸€å¼ æ³›é»„çš„å‰ªæŠ¥ã€‚å‰ªæŠ¥æ˜¯å…³äº2020å¹´å…´å¥å¤§å¦å æ¥¼æ¡ˆçš„ï¼Œè¿™å’Œå‘¨æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ",
                options: [
                    { text: "è¿”å›åŠå…¬å®¤", target: "office" }
                ],
                image: "officeDesk",
                isItemLocation: true,
                itemId: "item1",
                foundText: "å‘ç°äº†å…³äº2020å¹´å…´å¥å¤§å¦å æ¥¼æ¡ˆçš„å‰ªæŠ¥"
            },
            checkDeskD: {
                name: "DåŠå…¬æ¡Œ",
                description: "æ¡Œä¸Šå †æ»¡äº†æ–‡ä»¶å’ŒæŠ¥è¡¨ï¼Œçœ‹èµ·æ¥å·¥ä½œå¾ˆç¹å¿™ã€‚æ²¡æœ‰å‘ç°å¼‚å¸¸ç‰©å“ã€‚",
                options: [
                    { text: "è¿”å›åŠå…¬å®¤", target: "office" }
                ],
                image: "officeDesk",
                isDeadEnd: true
            },
            checkDeskCSurface: {
                name: "CåŠå…¬æ¡Œé¢",
                description: "æ¡Œé¢ä¸Šæ”¾ç€ä¸€å¼ çº¸æ¡ï¼Œä¸Šé¢å†™ç€å¥‡æ€ªçš„ä»£ç ï¼š<br><div class='code-display'>8â†‘2â†“4â†6â†’<br>42624, repeatï¼Œ<br>26822ï¼Œ<br>426248, 22ï¼Œ<br>42624</div>",
                options: [
                    { text: "è¿”å›åŠå…¬å®¤", target: "office" }
                ],
                image: "officeDesk",
                isItemLocation: true,
                itemId: "item2",
                foundText: "å‘ç°äº†ä¸€å¼ å†™æœ‰ç¥ç§˜ä»£ç çš„çº¸æ¡"
            },
            storage: {
                name: "å‚¨ç‰©å®¤",
                description: "å‚¨ç‰©å®¤é‡Œå †æ»¡äº†å„ç§å·¥å…·å’Œå¤‡ç”¨é›¶ä»¶ã€‚ä½†åœ°é¢å¼‚å¸¸å¹²å‡€ï¼Œä¸å †ç§¯ç°å°˜çš„è´§æ¶å½¢æˆé²œæ˜å¯¹æ¯”ã€‚è§’è½é‡Œæœ‰ä¸€ä¸ªå°æ¨è½¦ã€‚",
                options: [
                    { 
                        text: "æŸ¥çœ‹å°æ¨è½¦", 
                        target: "checkTrolley", 
                        item: null,
                        hint: "æ™®é€šçš„å°æ¨è½¦ï¼Œä½†è½®å­ä¸Šæœ‰æ–°é²œç—•è¿¹"
                    },
                    { 
                        text: "æ£€æŸ¥è´§æ¶ä¸Šå±‚", 
                        target: "checkShelfTop", 
                        item: "item3",
                        hint: "è´§æ¶ä¸Šå±‚æœ‰ä¸ªé»‘è‰²è®¾å¤‡"
                    },
                    { 
                        text: "æŸ¥çœ‹åœ°é¢", 
                        target: "checkStorageFloor", 
                        item: "item4",
                        hint: "åœ°é¢å¹²å‡€å¾—ä¸æ­£å¸¸"
                    },
                    { 
                        text: "æ£€æŸ¥å·¥å…·ç®±", 
                        target: "checkToolbox", 
                        item: null,
                        hint: "éƒ½æ˜¯æ™®é€šçš„å·¥å…·"
                    },
                    { 
                        text: "è¿”å›å‰å°", 
                        target: "frontDesk"
                    }
                ],
                image: "storageRoom"
            },
            checkTrolley: {
                name: "å°æ¨è½¦",
                description: "å°æ¨è½¦çš„è½®å­ä¸Šæœ‰æ–°é²œçš„æ‘©æ“¦ç—•è¿¹ï¼Œåƒæ˜¯æœ€è¿‘ç§»åŠ¨è¿‡é‡ç‰©ã€‚è½¦ä¸Šæœ‰ä¸€äº›ç°å°˜ï¼Œä½†ä¸åƒæ˜¯é•¿æœŸæ”¾ç½®çš„ã€‚",
                options: [
                    { text: "è¿”å›å‚¨ç‰©å®¤", target: "storage" }
                ],
                image: "storageRoom",
                isDeadEnd: true
            },
            checkShelfTop: {
                name: "è´§æ¶ä¸Šå±‚",
                description: "åœ¨è´§æ¶æœ€ä¸Šå±‚ï¼Œä½ å‘ç°äº†ä¸€ä¸ªé»‘è‰²çš„è®¾å¤‡â€”â€”ä¿¡å·å±è”½ä»ªã€‚ä¸Šé¢æœ‰å°‘è®¸ç°å°˜ï¼Œä½†æŒ‡ç¤ºç¯æ˜¾ç¤ºå®ƒæ›¾ç»è¢«ä½¿ç”¨è¿‡ã€‚",
                options: [
                    { text: "è¿”å›å‚¨ç‰©å®¤", target: "storage" }
                ],
                image: "storageRoom",
                isItemLocation: true,
                itemId: "item3",
                foundText: "å‘ç°äº†ä¸€ä¸ªä¿¡å·å±è”½ä»ª"
            },
            checkStorageFloor: {
                name: "å‚¨ç‰©å®¤åœ°é¢",
                description: "åœ°é¢å¼‚å¸¸å¹²å‡€ï¼Œåƒæ˜¯æœ€è¿‘è¢«å½»åº•æ¸…æ´è¿‡ã€‚ä½†å‘¨å›´è´§æ¶å’Œç‰©å“ä¸Šéƒ½ç§¯ç€ç°ï¼Œè¿™ç§åå·®å¾ˆä¸è‡ªç„¶ã€‚å¢™è§’çš„æ’æ°´å£é™„è¿‘ä¼¼ä¹æœ‰æ·¡æ·¡çš„ç—•è¿¹ã€‚",
                options: [
                    { text: "è¿”å›å‚¨ç‰©å®¤", target: "storage" }
                ],
                image: "storageRoom",
                isItemLocation: true,
                itemId: "item4",
                foundText: "æ³¨æ„åˆ°åœ°é¢è¢«å¼‚å¸¸å½»åº•åœ°æ¸…æ´è¿‡"
            },
            checkToolbox: {
                name: "å·¥å…·ç®±",
                description: "å·¥å…·ç®±é‡Œåªæœ‰å„ç§ç»´ä¿®å·¥å…·ï¼Œæ‘†æ”¾å¾—å¾ˆæ•´é½ï¼Œæ²¡æœ‰ä»€ä¹ˆå¼‚å¸¸ã€‚",
                options: [
                    { text: "è¿”å›å‚¨ç‰©å®¤", target: "storage" }
                ],
                image: "storageRoom",
                isDeadEnd: true
            }
        };

        // ç‰©å“æ­ç¤ºé¡ºåº - æ›´æ–°ä¸ºæ–°çš„çº¿ç´¢
        const itemRevealOrder = [
            "å…´å¥å¤§å¦å æ¥¼æ¡ˆå‰ªæŠ¥",
            "ç¥ç§˜ä»£ç çº¸æ¡",
            "ä¿¡å·å±è”½ä»ª",
            "å¼‚å¸¸æ¸…æ´çš„åœ°é¢"
        ];

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            updateLocation();
            updateInventory();
            updateClue();
        }

        // æ›´æ–°å½“å‰ä½ç½®å’Œé€‰é¡¹
       /*  function updateLocation() {
            const current = locations[gameState.currentLocation];
            const locationElement = document.getElementById('current-location');
            const optionsContainer = document.getElementById('options-container');
            const resultElement = document.getElementById('result');
            const progressElement = document.getElementById('progress');

            // æ›´æ–°ä½ç½®ä¿¡æ¯
            locationElement.innerHTML = `<h2>${current.name}</h2><p>${current.description}</p>`;

            // æ›´æ–°è¿›åº¦
            /* const foundCount = Object.values(gameState.foundItems).filter(Boolean).length;
            const progressText = foundCount < 4 ? 
                `çº¿ç´¢æ”¶é›†: ${foundCount}/4 | ç»§ç»­æœå¯»...` :
                `çº¿ç´¢æ”¶é›†: 4/4 | ç‚¹å‡»è¿”å›ä¸Šçº§é¡µé¢...`;
            progressElement.textContent = progressText;  

            

            // æ¸…é™¤ä¹‹å‰çš„é€‰é¡¹å’Œç»“æœ
            optionsContainer.innerHTML = '';
            resultElement.style.display = 'none';
            resultElement.className = 'result';

            // æ·»åŠ é€‰é¡¹
            current.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å‰ç½®è¦æ±‚
                if (option.requires && !gameState.foundItems[option.requires]) {
                    button.classList.add('disabled');
                    button.onclick = () => {
                        showResult("è¿™é‡Œå¥½åƒéœ€è¦ä»€ä¹ˆä¸œè¥¿æ‰èƒ½æ‰“å¼€...", 'failure');
                    };
                } else {
                    button.onclick = () => selectOption(option.target, option.item);
                }
                
                optionsContainer.appendChild(button);
            });

            // æ›´æ¢èƒŒæ™¯å›¾ç‰‡
            changeBackground(current.image);
        }
 */
        
 function updateLocation() {
    const current = locations[gameState.currentLocation];
    const locationElement = document.getElementById('current-location');
    const optionsContainer = document.getElementById('options-container');
    const resultElement = document.getElementById('result');
    const progressElement = document.getElementById('progress');

    // æ›´æ–°ä½ç½®ä¿¡æ¯
    locationElement.innerHTML = `<h2>${current.name}</h2><p>${current.description}</p>`;

    // æ›´æ–°è¿›åº¦ - åŒ…å«å¯ç‚¹å‡»çš„é“¾æ¥
    const foundCount = Object.values(gameState.foundItems).filter(Boolean).length;
    
    if (foundCount < 4) {
        // æœªæ”¶é›†å®Œçº¿ç´¢æ—¶ï¼Œæ˜¾ç¤ºæ™®é€šæ–‡æœ¬
        progressElement.textContent = `çº¿ç´¢æ”¶é›†: ${foundCount}/4 | ç»§ç»­æœå¯»...`;
        progressElement.style.cursor = 'default';
        progressElement.onclick = null;
        progressElement.style.color = '';
        progressElement.style.textDecoration = '';
        progressElement.style.fontWeight = '';
    } else {
        // æ”¶é›†å®Œæ‰€æœ‰çº¿ç´¢æ—¶ï¼Œæ˜¾ç¤ºå¯ç‚¹å‡»çš„é“¾æ¥
        progressElement.innerHTML = `çº¿ç´¢æ”¶é›†: 4/4 | <span id="return-link" style="cursor: pointer; text-decoration: underline; color: #007bff; font-weight: bold;">ç‚¹å‡»è¿”å›ä¸Šçº§é¡µé¢...</span>`;
        
        // ä¸ºé“¾æ¥éƒ¨åˆ†æ·»åŠ ç‚¹å‡»äº‹ä»¶
        const returnLink = document.getElementById('return-link');
        if (returnLink) {
            returnLink.onclick = function(e) {
                e.stopPropagation();
                window.location.href = 'xjjt.html';
            };
        }
        
        // æ•´ä¸ªè¿›åº¦æ¡åŒºåŸŸä¹Ÿå¯ç‚¹å‡»ï¼ˆå¯é€‰ï¼‰
        progressElement.style.cursor = 'pointer';
        progressElement.onclick = function() {
            window.location.href = 'xjjt.html';
        };
    }

    // æ¸…é™¤ä¹‹å‰çš„é€‰é¡¹å’Œç»“æœ
    optionsContainer.innerHTML = '';
    resultElement.style.display = 'none';
    resultElement.className = 'result';

    // æ·»åŠ é€‰é¡¹
    current.options.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option.text;
        
        // æ£€æŸ¥æ˜¯å¦æœ‰å‰ç½®è¦æ±‚
        if (option.requires && !gameState.foundItems[option.requires]) {
            button.classList.add('disabled');
            button.onclick = () => {
                showResult("è¿™é‡Œå¥½åƒéœ€è¦ä»€ä¹ˆä¸œè¥¿æ‰èƒ½æ‰“å¼€...", 'failure');
            };
        } else {
            button.onclick = () => selectOption(option.target, option.item);
        }
        
        optionsContainer.appendChild(button);
    });

    // æ›´æ¢èƒŒæ™¯å›¾ç‰‡
    changeBackground(current.image);
}


 // å¤„ç†é€‰é¡¹é€‰æ‹©
        function selectOption(target, itemId) {
            gameState.currentLocation = target;
            updateLocation();
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ç‰©å“ä½ç½®
            const current = locations[target];
            if (current.isItemLocation && !gameState.foundItems[current.itemId]) {
                // æ˜¾ç¤ºæ‰¾åˆ°ç‰©å“
                setTimeout(() => {
                    const itemIndex = parseInt(current.itemId.replace('item', '')) - 1;
                    gameState.itemNames[itemIndex] = itemRevealOrder[itemIndex];
                    
                    showResult(`æ‰¾åˆ°äº†çº¿ç´¢ï¼š${current.foundText}`, 'success');
                    gameState.foundItems[current.itemId] = true;
                    updateInventory();
                    updateClue();
                    
                    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
                    if (Object.values(gameState.foundItems).every(Boolean)) {
                        setTimeout(() => {
                            showResult(`<h3>æ‰€æœ‰çº¿ç´¢éƒ½å·²æ‰¾åˆ°ï¼</h3>
                            <p>ä½ æ”¶é›†åˆ°äº†å…¨éƒ¨4ä¸ªå…³é”®çº¿ç´¢ï¼š</p>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                <li>2020å¹´å…´å¥å¤§å¦å æ¥¼æ¡ˆå‰ªæŠ¥</li>
                                <li>CåŠå…¬æ¡Œä¸Šçš„ç¥ç§˜ä»£ç çº¸æ¡</li>
                                <li>å‚¨ç‰©é—´çš„ä¿¡å·å±è”½ä»ª</li>
                                <li>å¼‚å¸¸æ¸…æ´çš„åœ°é¢ç—•è¿¹</li>
                            </ul>
                            <p>å€¼ç­è¡¨æ˜¾ç¤º12æœˆ31æ—¥å‘¨å€¼ç­ï¼Œå‚¨ç‰©é—´æœ‰å°æ¨è½¦ç§»åŠ¨ç—•è¿¹...</p>
                            <p>è¿™äº›è¯æ®æš—ç¤ºç€ç‰©ä¸šå¯èƒ½å‚ä¸äº†æŸäº›ä¸ä¸ºäººçŸ¥çš„äº‹ä»¶ã€‚</p>`, 'success');
                        }, 1500);
                    }
                }, 300);
            } else if (current.isDeadEnd) {
                setTimeout(() => {
                    showResult("è¿™é‡Œæ²¡æœ‰å‘ç°æœ‰ç”¨çš„çº¿ç´¢ã€‚", 'failure');
                }, 300);
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(message, type) {
            const resultElement = document.getElementById('result');
            resultElement.innerHTML = message;
            resultElement.className = `result ${type}`;
            resultElement.style.display = 'block';
            
            // è‡ªåŠ¨éšè—ç»“æœ
            if (type === 'failure') {
                setTimeout(() => {
                    resultElement.style.display = 'none';
                }, 2000);
            }
        }

        // æ›´æ–°åº“å­˜æ˜¾ç¤º
        function updateInventory() {
            const inventoryItems = document.getElementById('inventory-items');
            inventoryItems.innerHTML = '';
            
            gameState.itemNames.forEach((itemName, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = gameState.foundItems[`item${index + 1}`] ? 
                    'inventory-item found' : 'inventory-item';
                itemDiv.textContent = itemName;
                inventoryItems.appendChild(itemDiv);
            });
        }

        // æ›´æ–°çº¿ç´¢æç¤º
        function updateClue() {
            const clueElement = document.getElementById('current-clue');
            const foundCount = Object.values(gameState.foundItems).filter(Boolean).length;
            clueElement.textContent = gameState.clues[Math.min(foundCount, gameState.clues.length-1)];
        }

        // æ›´æ¢èƒŒæ™¯å›¾ç‰‡
        function changeBackground(imageKey) {
            const image = locationImages[imageKey] || locationImages.frontDesk;
            document.getElementById('background').style.backgroundImage = `url('${image}')`;
        }

        // é˜²æ­¢è¯¯è§¦å’Œé•¿æŒ‰èœå•
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        // å¼€å§‹æ¸¸æˆ
        window.onload = initGame;
    </script>
</body>
</html>