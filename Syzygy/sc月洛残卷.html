<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpeg" href="https://sylvie-seven-cq.top/gallery/search.png">
    <title>æœˆæ´›æ®‹å·å‘½æœ¯ä¹‹èš€ - æœç´¢ç»“æœ</title>
    <!-- ch-->
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: white;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 80%;
            margin: 0 auto;
            padding-top: 30px;
        }

        .logo {
            display: block;
            margin: 0 auto 20px;
            width: 150px;
            height: 150px;
        }

        .search-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-box {
            width: 500px;
            padding: 12px 20px;
            font-size: 16px;
            border: 1px solid #dfe1e5;
            border-radius: 24px;
            outline: none;
            box-shadow: 0 1px 6px rgba(32, 33, 36, 0.28);
        }

            .search-box:focus {
                box-shadow: 0 1px 6px rgba(32, 33, 36, 0.45);
            }

        .search-button {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }

        h1 {
            text-align: center;
            font-size: 36px;
            margin-bottom: 20px;
        }

        .news-list {
            list-style-type: none;
            padding-left: 0;
        }

        .news-item {
            border-bottom: 1px solid #ddd;
            padding: 15px 0;
        }

            .news-item .title {
                font-size: 18px;
                font-weight: bold;
                color: #1a0dab;
                text-decoration: none;
            }

                .news-item .title:hover {
                    text-decoration: underline;
                }

            .news-item .source {
                font-size: 14px;
                color: #6a6a6a;
            }

            .news-item .date {
                font-size: 12px;
                color: #777;
            }

        .related-searches {
            margin-top: 40px;
        }

            .related-searches h2 {
                font-size: 24px;
                margin-bottom: 10px;
            }

            .related-searches ul {
                list-style-type: none;
                padding-left: 0;
            }

                .related-searches ul li {
                    font-size: 16px;
                    margin-bottom: 5px;
                }

                    .related-searches ul li a {
                        color: #1a0dab;
                        text-decoration: none;
                    }

                        .related-searches ul li a:hover {
                            text-decoration: underline;
                        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://sylvie-seven-cq.top/gallery/search.png" alt="Logo" class="logo">
        <div class="search-container">
            <input type="text" class="search-box" id="searchInput" placeholder="æœç´¢å…¶ä»–å…³é”®è¯..." value="æœˆæ´›æ®‹å·å‘½æœ¯ä¹‹èš€">
            <button class="search-button" id="searchButton">æœç´¢</button>
        </div>
        <h1 id="pageTitle">æœˆæ´›æ®‹å·å‘½æœ¯ä¹‹èš€ - æœç´¢ç»“æœåˆ—è¡¨</h1>
        <div id="loadingIndicator" class="loading" style="display: none;">åŠ è½½ä¸­...</div>
        <ul class="news-list" id="resultsList">
            <!-- æœç´¢ç»“æœå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </ul>

        <div class="related-searches">
            <h2>çŒœä½ æƒ³æœ</h2>
            <ul id="relatedSearchesList">
                <!-- å›ºå®šæ˜¾ç¤ºä¸‰ä¸ªå…³é”®è¯ -->

                <li><a href="javascript:void(0)" class="related-search" data-keyword="æœˆæ´›æ®‹å·å‘½æ•°ä¹‹èš€">æœˆæ´›æ®‹å·å‘½æ•°ä¹‹èš€</a></li>

            </ul>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡æ¥å­˜å‚¨å…³é”®è¯æ˜ å°„
        let keywordRedirects = {};

        // ä»JSONæ–‡ä»¶åŠ è½½å…³é”®è¯æ˜ å°„
        async function loadKeywordRedirects() {
            try {
                console.log('å¼€å§‹åŠ è½½å…³é”®è¯æ˜ å°„...');
                document.getElementById('loadingIndicator').style.display = 'block';

                // ä¿®æ­£ä¸ºæ­£ç¡®çš„JSONæ–‡ä»¶URLï¼ˆåŒ…å«.jsonæ‰©å±•åï¼‰
                const url = 'https://sylvie-seven-cq.top/Syzygy/meizhaoledejson2.json?v=' + Date.now();
                const response = await fetch(url);

                if (!response.ok) {
                    console.warn('å…³é”®è¯æ˜ å°„æ–‡ä»¶åŠ è½½å¤±è´¥ï¼ŒçŠ¶æ€ç :', response.status);
                    document.getElementById('loadingIndicator').style.display = 'none';
                    return;
                }

                const data = await response.json();
                console.log('âœ… å…³é”®è¯æ˜ å°„åŠ è½½æˆåŠŸ:', Object.keys(data).length, 'ä¸ªå…³é”®è¯');

                // é€‚é…ä¸åŒçš„JSONæ ¼å¼ï¼šç›´æ¥URLæ ¼å¼æˆ–æ•°ç»„æ ¼å¼
                Object.keys(data).forEach(key => {
                    try {
                        const value = data[key];

                        // å¦‚æœå€¼æ˜¯å­—ç¬¦ä¸²ï¼ˆç›´æ¥URLæ ¼å¼ï¼‰ï¼Œåˆ™è½¬æ¢ä¸ºæ•°ç»„æ ¼å¼
                        if (typeof value === 'string') {
                            keywordRedirects[key] = value;
                            console.log(`   "${key}" -> ${value} (ç›´æ¥URLæ ¼å¼)`);
                        }
                        // å¦‚æœå€¼æ˜¯æ•°ç»„ï¼ˆåŸæ ¼å¼ï¼‰ï¼Œåˆ™å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„URL
                        else if (Array.isArray(value) && value.length > 0) {
                            const redirectInfo = value[0];
                            const redirectUrl = redirectInfo.url || redirectInfo;
                            keywordRedirects[key] = redirectUrl;
                            console.log(`   "${key}" -> ${redirectUrl} (æ•°ç»„æ ¼å¼)`);
                        }
                    } catch (e) {
                        console.warn('å¤„ç†å…³é”®è¯å¤±è´¥:', key, e);
                    }
                });

                console.log('æ€»å…±åŠ è½½äº†', Object.keys(keywordRedirects).length, 'ä¸ªå…³é”®è¯');
                document.getElementById('loadingIndicator').style.display = 'none';

            } catch (error) {
                console.error('âŒ åŠ è½½å…³é”®è¯æ˜ å°„å¤±è´¥:', error);
                document.getElementById('loadingIndicator').style.display = 'none';
            }
        }

        // æ£€æŸ¥å…³é”®è¯æ˜ å°„ - ç›´æ¥åŒ¹é…
        function checkKeywordRedirect(query) {
            if (!keywordRedirects || Object.keys(keywordRedirects).length === 0) {
                console.log('âš ï¸ å…³é”®è¯æ˜ å°„æœªåŠ è½½');
                return false;
            }

            console.log(`ğŸ” æœç´¢æ£€æŸ¥: "${query}"`);

            // ç›´æ¥æ£€æŸ¥å…³é”®è¯æ˜ å°„
            if (keywordRedirects[query]) {
                const redirectUrl = keywordRedirects[query];
                console.log('ğŸ¯ æ‰¾åˆ°åŒ¹é…! è·³è½¬åˆ°:', redirectUrl);
                window.location.href = redirectUrl; // ä½¿ç”¨window.location.hrefè¿›è¡Œè·³è½¬
                return true;
            }

            console.log('âŒ æœªæ‰¾åˆ°å…³é”®è¯æ˜ å°„');
            return false;
        }

        // æ‰§è¡Œæ™®é€šæœç´¢åŠŸèƒ½
        function performNormalSearch(query) {
            console.log('ğŸ” æ‰§è¡Œæ™®é€šæœç´¢:', query);

            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = '';

            document.title = `${query} - æœç´¢ç»“æœ`;
            const pageTitle = document.getElementById('pageTitle');
            if (pageTitle) {
                pageTitle.textContent = `${query} - æœç´¢ç»“æœåˆ—è¡¨`;
            }

            const results = searchResults[query] || [];

            if (results.length === 0) {
                const noResultsItem = document.createElement('li');
                noResultsItem.className = 'news-item';
                noResultsItem.innerHTML = `
                                <div class="title">æœç´¢: ${query}</div>
                                <div class="source">æš‚æ— æœç´¢ç»“æœï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯</div>
                            `;
                resultsList.appendChild(noResultsItem);
            } else {
                results.forEach(result => {
                    const resultItem = document.createElement('li');
                    resultItem.className = 'news-item';
                    resultItem.innerHTML = `
                                    <a href="${result.url}" class="title" target="_blank">${result.title}</a>
                                    <div class="source">${result.source}</div>
                                    <div class="date">${result.date}</div>
                                `;
                    resultsList.appendChild(resultItem);
                });
            }
        }

        // ä¸»æœç´¢å‡½æ•°
        function performSearch(query) {
            console.log('ğŸš€ å¼€å§‹æœç´¢:', query);

            if (checkKeywordRedirect(query)) {
                console.log('âœ… å…³é”®è¯æ˜ å°„åŒ¹é…ï¼Œå‡†å¤‡è·³è½¬');
                return;
            }

            console.log('ğŸ“ æ‰§è¡Œæ™®é€šæœç´¢é€»è¾‘');
            performNormalSearch(query);
        }

        // ç”Ÿæˆå›ºå®šçš„ç›¸å…³æœç´¢
        function generateRelatedSearches() {
            // ä¸ºå›ºå®šçš„ç›¸å…³æœç´¢æ·»åŠ ç‚¹å‡»äº‹ä»¶
            const relatedSearchLinks = document.querySelectorAll('.related-search');
            relatedSearchLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const keyword = this.getAttribute('data-keyword');
                    document.getElementById('searchInput').value = keyword;
                    performSearch(keyword);
                });
            });
        }

        // æ¨¡æ‹Ÿæœç´¢ç»“æœæ•°æ®
        const searchResults = {
            "æœˆæ´›æ®‹å·å‘½æ•°ä¹‹èš€": [
                {
                    title: "æ‰¾åˆ°ä¸€æ¡ç›¸å…³ç»“æœ",
                    source: "æ¶‰åŠæ•æ„Ÿä¿¡æ¯ï¼Œè¯·è°¨æ…å¤„ç†ã€‚",
                    date: "2025-9-7",
                    url: "https://sylvie-seven-cq.top/Syzygy/æœˆæ´›æ®‹å·.html"
                }
            ],
            "å‘½æ•°ä¹‹èš€æœˆæ´›æ®‹å·": [
                {
                     title: "æ‰¾åˆ°ä¸€æ¡ç›¸å…³ç»“æœ",
                    source: "æ¶‰åŠæ•æ„Ÿä¿¡æ¯ï¼Œè¯·è°¨æ…å¤„ç†ã€‚",
                    date: "2025-9-7",
                    url: "https://sylvie-seven-cq.top/Syzygy/æœˆæ´›æ®‹å·.html"
                }
            ]
        };

        // è·å–DOMå…ƒç´ 
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const resultsList = document.getElementById('resultsList');
        const pageTitle = document.getElementById('pageTitle');

        // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
        async function initSearch() {
            console.log('ğŸ”§ åˆå§‹åŒ–æœç´¢åŠŸèƒ½...');

            await loadKeywordRedirects();
            performSearch('æœˆæ´›æ®‹å·å‘½æœ¯ä¹‹èš€');
            generateRelatedSearches();

            searchButton.addEventListener('click', function () {
                const query = searchInput.value.trim();
                if (query) {
                    performSearch(query);
                } else {
                    alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                }
            });

            searchInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    const query = searchInput.value.trim();
                    if (query) {
                        performSearch(query);
                    }
                }
            });

            console.log('âœ… æœç´¢åŠŸèƒ½åˆå§‹åŒ–å®Œæˆ');
        }

        document.addEventListener('DOMContentLoaded', initSearch);
    </script>
</body>
</html>


